{
  "hash": "4d6f0cd4de0727e5a68b3b22b8e9bcbe",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Membuat Statistik Menjadi Dinamis dan Interaktif\"\ndescription: |\n  Statistik bukan hanya untuk statistikawan tetapi juga untuk orang awam. Untuk itu, statistik perlu dikemas secara lebih menarik dan menawan. Shiny memungkinkan agar statistik disajikan secara dinamis dan interaktif agar menarik dan mudah dipelajari oleh orang awam.\nauthor:\n  - name: Yosep Dwi Kristanto\n    url: https://people.usd.ac.id/~ydkristanto/\n    affiliation: Pendidikan Matematika, Universitas Sanata Dharma, Yogyakarta\n    affiliation-url: https://www.usd.ac.id/s1pmat\n    orcid: 0000-0003-1446-0422\ndate: 2024-08-10\ncategories:\n  - statistik dunia\n  - tutorial\n  - visualisasi data\nimage: \"statistik-interaktif.png\"\nimage-alt: |\n  Logo Shiny dengan latar belakang diagram pencar yang dibuat secara acak. Logo Shiny diperoleh dari Wikimedia.\nkeywords: \n  - Shiny\n  - Gapminder\n  - harapan hidup\n  - produk domestik bruto\n  - PDB\n  - diagram pencar\ncopyright: \"Â© 2024 Yosep Dwi Kristanto\"\nlicense: \"CC BY\"\neditor_options: \n  chunk_output_type: console\ncode-annotations: select\n---\n\n\nJelajah data itu seringkali kompleks dan menantang. Apalagi yang kita jelajahi adalah data raya. Apakah penjelajahan data tersebut dapat kita buat menjadi lebih mudah dan menarik? Artikel blog ini akan mendemonstrasikan bagaimana mengembangkan aplikasi Shiny untuk menjelajah data dari [pos sebelumnya](/pos/2024-08-statistik-jendela-dunia/index.qmd \"Statistik Adalah Jendela Dunia\").\n\nKita berkenalan dengan Shiny terlebih dahulu. Shiny adalah sebuah cara yang memungkinkan kita untuk membuat aplikasi berbasis web dengan bahasa pemrograman R (atau Python). Shiny ini cocok bagi kamu yang baru awal-awal memelajari R maupun yang sudah lama dan lihai menggunakan bahasa pemrograman itu.\n\n## Mengapa Perlu Aplikasi Shiny? {#sec-mengapa-shiny}\n\nBayangkan kamu adalah seorang analis data. Kamu sedang menganalisis [data Gapminder](https://github.com/jennybc/gapminder){.external target=\"_blank\"} dengan R. Tujuannya adalah untuk melihat hubungan antara PDB (Pendapatan Domestik Bruto) per kapita dan angka harapan hidup berbagai negara. Pertama, kamu panggil dulu paket yang diperlukan. Paket tersebut adalah [{tidyverse}](https://www.tidyverse.org/){.external target=\"_blank\"}.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nlibrary(tidyverse)\n```\n:::\n\n\nSetelah itu, kamu impor data yang tersedia secara daring dengan menggunakan fungsi `load()` dan `url()`. Hasilnya, kamu mendapatkan data dengan nama `gapminder`.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nload(url(\"https://github.com/jennybc/gapminder/raw/main/data/gapminder.rdata\"))\n```\n:::\n\n\nData tersebut memiliki enam variabel, yaitu negara (`country`), benua (`continent`), tahun (`year`), angka harapan hidup (`lifeExp`), dan PDB per kapita (`gdpPercap`, dalam dolar internasional). Tak ingin berlama-lama, kamu langsung memvisualisasikan hubungan antara PDB per kapita dan angka harapan hidup dengan diagram pencar. Hasilnya ditunjukkan pada @fig-hub-pdb-ahh.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\ngapminder |> \n  ggplot(aes(x = gdpPercap, y = lifeExp)) + \n  geom_point()\n```\n\n::: {.cell-output-display}\n![Hubungan antara PDB per kapita dan angka harapan hidup berbagai negara](index_files/figure-html/fig-hub-pdb-ahh-1.png){#fig-hub-pdb-ahh width=672}\n:::\n:::\n\n\nSayangnya, @fig-hub-pdb-ahh menggambarkan semua titik datanya. Padahal, kamu ingin menggambarkan titik-titik pada tahun tertentu saja. Untuk itu, kamu perlu mengetahui tahun berapa saja yang tersedia dalam data.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nunique(gapminder$year)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] 1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 2002 2007\n```\n\n\n:::\n:::\n\n\nTahunnya ternyata mulai dari 1952 sampai 2007 dengan interval lima tahun. Selanjutnya, kamu ingin menggambar seperti pada @fig-hub-pdb-ahh tetapi hanya untuk tahun 2007. Keinginanmu ini terwujud dengan menjalankan baris kode di bawah. Hasilnya tersaji pada @fig-hub-pdb-ahh-2007.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\ngapminder |> \n  filter(year == 2007) |> \n  ggplot(aes(x = gdpPercap, y = lifeExp)) + \n  geom_point()\n```\n\n::: {.cell-output-display}\n![Hubungan antara PDB per kapita dan angka harapan hidup berbagai negara pada tahun 2007](index_files/figure-html/fig-hub-pdb-ahh-2007-1.png){#fig-hub-pdb-ahh-2007 width=672}\n:::\n:::\n\n\nDalam baris kode di atas, terdapat perintah `filter(year == 2007)`. Kode tersebut berguna untuk memfilter datanya agar nilai variabel `year`-nya sama dengan 2007.\n\nSekarang kamu ingin memvisualisasikan lagi data tersebut tetapi untuk tahun 2002. Caranya mudah. Kamu tinggal mengganti 2007 dengan 2002 dalam fungsi `filter()` di atas. Alternatifnya, kamu dapat membuat sebuah variabel baru, misalnya `tahun_int`, dan membuat nilainya menjadi 2002. Setelah itu, kamu ganti 2007 dalam fungsi `filter()` di atas dengan variabel tersebut. Alhasil, kamu mendapatkan diagram pencar seperti yang ditunjukkan @fig-hub-pdb-ahh-2002.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\n# Variabel `tahun_int` dan nilainya sama dengan 2002\ntahun_int <- 2002\n\n# Memvisualisasikan data untuk tahun 2002\ngapminder |> \n  filter(year == tahun_int) |> \n  ggplot(aes(x = gdpPercap, y = lifeExp)) + \n  geom_point()\n```\n\n::: {.cell-output-display}\n![Hubungan antara PDB per kapita dan angka harapan hidup berbagai negara pada tahun 2002](index_files/figure-html/fig-hub-pdb-ahh-2002-1.png){#fig-hub-pdb-ahh-2002 width=672}\n:::\n:::\n\n\nBagaimana jika kamu ingin membuat visualisasi data untuk tahun 1997? Kamu ganti nilai variabel `tahun_int` dengan 1997 dan jalankan baris kodenya. Bagaimana untuk tahun-tahun lainnya? Caranya sama:\n\n1.  kamu ganti nilai varibel `tahun_int` dengan tahun yang kamu mau, dan kemudian\n\n2.  jalankan lagi baris kodenya.\n\nDua langkah tersebut perlu dilakukan agar kamu dapat memvisualisasikan data untuk tahun-tahun tertentu. Adakah cara yang lebih efisien? Adakah cara agar langkah kedua di atas otomatis dijalankan ketika kamu mengganti nilai variabel `tahun_int`? Tentu saja ada! Caranya adalah dengan menggunakan Shiny.\n\nShiny menggunakan pemrograman yang reaktif. Artinya, Shiny akan secara otomatis menjalankan baris perintah untuk menghasilkan luaran ketika nilai inputnya diganti. Dalam kasusmu ini, inputnya adalah nilai variabel `tahun_int` dan luarannya adalah diagram pencar seperti pada @fig-hub-pdb-ahh-2007 atau @fig-hub-pdb-ahh-2002. Dengan demikian, Shiny akan langsung membuat diagram pencar seperti itu ketika nilai variabel `tahun_int` kamu ganti.\n\n## Membuat Aplikasi Shiny {#sec-membuat-app-shiny}\n\nKamu telah mengenal Shiny. Sekarang kita akan membuat aplikasi Shiny berdasarkan proses analisis data yang dipaparkan pada @sec-mengapa-shiny. Karena kita akan menggunakan paket [{shiny}](https://CRAN.R-project.org/package=shiny){.external target=\"_blank\"}, paket tersebut perlu terpasang di komputermu. Jika belum, kamu perlu memasangnya dengan perintah berikut.\n\n``` r\ninstall.packages(\"shiny\")\n```\n\nAku menyarankanmu untuk membuat aplikasi Shiny dengan [RStudio](https://posit.co/download/rstudio-desktop/){.external target=\"_blank\"} agar lebih mudah. Di RStudio, kamu dapat membuat aplikasi Shiny dengan mengklik **File \\| New File \\| Shiny Web App...** Pada jendela *New Shiny Web Application*, tuliskan nama aplikasinya dan klik **Create**. Setelah itu, kamu akan mendapatkan fail `app.R` yang isinya seperti ini.\n\n``` {.r filename=\"app.R\"}\n#\n# This is a Shiny web application. You can run the application by clicking\n# the 'Run App' button above.\n#\n# Find out more about building applications with Shiny here:\n#\n#    https://shiny.posit.co/\n#\n\nlibrary(shiny)\n\n# Define UI for application that draws a histogram\nui <- fluidPage(\n\n    # Application title\n    titlePanel(\"Old Faithful Geyser Data\"),\n\n    # Sidebar with a slider input for number of bins \n    sidebarLayout(\n        sidebarPanel(\n            sliderInput(\"bins\",\n                        \"Number of bins:\",\n                        min = 1,\n                        max = 50,\n                        value = 30)\n        ),\n\n        # Show a plot of the generated distribution\n        mainPanel(\n           plotOutput(\"distPlot\")\n        )\n    )\n)\n\n# Define server logic required to draw a histogram\nserver <- function(input, output) {\n\n    output$distPlot <- renderPlot({\n        # generate bins based on input$bins from ui.R\n        x    <- faithful[, 2]\n        bins <- seq(min(x), max(x), length.out = input$bins + 1)\n\n        # draw the histogram with the specified number of bins\n        hist(x, breaks = bins, col = 'darkgray', border = 'white',\n             xlab = 'Waiting time to next eruption (in mins)',\n             main = 'Histogram of waiting times')\n    })\n}\n\n# Run the application \nshinyApp(ui = ui, server = server)\n```\n\nBaris kode di atas adalah baris kode yang sudah lengkap untuk sebuah aplikasi. Tetapi, aplikasi tersebut tidak sesuai dengan tujuanmu, yaitu memvisualisasikan hubungan antara PDB per kapita dan angka harapan hidup. Untuk itu, hapus semua baris kode di atas dan ganti dengan baris kode seperti pada @lst-kode-app-shiny berikut.\n\n``` {#lst-kode-app-shiny .r filename=\"app.R\" lst-cap=\"Baris kode di dalam app.R\"}\nlibrary(shiny)\nlibrary(tidyverse)\nload(url(\"https://github.com/jennybc/gapminder/raw/main/data/gapminder.rdata\"))\n\nui <- fluidPage(\n  sliderInput(\n    inputId = \"tahun\",\n    label = \"Tahun\",\n    min = 1952,\n    max = 2007,\n    value = 2007,\n    step = 5\n  ),\n  plotOutput(\"diagram_pencar\")\n)\n\nserver <- function(input, output, session) {\n  output$diagram_pencar <- renderPlot({\n    tahun_int <- input$tahun\n    \n    gapminder |> \n      filter(year == tahun_int) |> \n      ggplot(aes(x = gdpPercap, y = lifeExp)) + \n      geom_point()\n    \n  })\n}\n\nshinyApp(ui = ui, server = server)\n```\n\nAplikasi `app.R` tersebut memuat baris kode yang melakukan empat hal sebagai berikut.\n\n1.  Baris kode tersebut memanggil paket {shiny} dan {tidyverse} melalui perintah `library(shiny)` dan `library(tidyverse)`. Selain itu, baris kode tersebut juga mengimpor data `gapminder` dengan perintah `load(url(\"https://github.com/jennybc/gapminder/raw/main/data/gapminder.rdata\"))`.\n\n2.  Baris kode tersebut membuat antarmuka (`ui`): laman yang menjadi tempat berinteraksinya pengguna. Ada tiga fungsi yang digunakan untuk membuat antarmuka tersebut, yaitu `fluidPage()`, `sliderInput()`, dan `plotOutput()`. Lebih lengkapnya akan dijelaskan pada @sec-antarmuka.\n\n3.  Baris kode tersebut menentukan perilaku dari aplikasi tersebut dengan fungsi `server`. Pembahasan lebih lanjut dapat dilihat pada @sec-server.\n\n4.  Baris kode yang terakhir, yaitu `shinyApp(ui = ui, server = server)`, berfungsi untuk membuat aplikasi Shiny berdasarkan antarmuka `ui` dan fungsi `server` dan kemudian menjalankannya.\n\nApabila kamu sudah penasaran dengan aplikasi Shiny tersebut, kamu dapat menjalankannya. Untuk melakukannya di RStudio, klik tombol **Run App** yang terletak di bagian kanan-atas dokumen. Perhatikan @fig-run-app!\n\n![Tombol Run App yang dapat ditemukan di bagian kanan-atas dokumen](aset/Run-App-RStudio.png){#fig-run-app fig-alt=\"Tombol Run App dalam RStudio\" fig-align=\"center\"}\n\nSetelah kamu mengklik tombol tersebut, beberapa saat kamu dapat melihat aplikasi tersebut. Tampilannya ditunjukkan pada @fig-tampilan-app.\n\n![Tampilan aplikasi Shiny](aset/tampilan-aplikasi-shiny.png){#fig-tampilan-app fig-align=\"center\"}\n\nKamu dapat berinteraksi dengan aplikasi tersebut. Silakan geser-geser slidernya (bagian kiri-atas aplikasi dengan label \"Tahun\") untuk mengubah tahunnya. Ketika tahun tersebut kamu ganti, kamu dapat melihat tampilan diagram pencarnya juga menyesuaikan. Untuk menutup aplikasi tersebut, klik tombol **Close** yang terletak di sebelah kanan-atas.\n\n### Antarmuka Aplikasi Shiny {#sec-antarmuka}\n\nSalah satu bagian baris kode aplikasi Shiny adalah kode antarmukanya. Pada baris kode @lst-kode-app-shiny, pendefinisian antarmukanya ada di `ui`. Terdapat tiga fungsi yang digunakan, yaitu `fluidPage()`, `sliderInput()`, dan `plotOutput()`.\n\n-   `fluidPage()` merupakan fungsi tata letak. Fungsi ini mengatur tata letak dari tampilan aplikasi Shiny kita.\n\n-   `sliderInput()` merupakan salah satu kontrol input. Fungsi ini memungkinkan pengguna untuk berinteraksi dengan aplikasi kita. Dengan menggeser-geser slidernya, pengguna menyediakan input bagi aplikasi kita. Terdapat enam argumen yang kita isikan dalam fungsi tersebut. Argumen `inputId = \"tahun\"` memberikan identitas terhadap slider tersebut. Identitas ini selanjutnya digunakan lagi dalam fungsi `server` nantinya. Argumen `label=\"Tahun\"` berfungsi untuk memberikan label terhadap slider tersebut. Label ini ditampilkan dalam antarmuka aplikasi kita. Argumen `min = 1952` , `max = 2007`, dan `step = 5` memberikan nilai-nilai yang mungkin untuk inputnya, yaitu bilangan mulai dari 1952 sampai 2007 dengan interval 5. Terakhir, `value = 2007` memberikan nilai awal untuk slider tersebut.\n\n-   `plotOutput()` merupakan salah satu kontrol luaran aplikasi Shiny. Fungsi ini memberitahu Shiny tempat meletakkan luaran plot yang memiliki identitas `diagram_pencar`.\n\n### Dapur Aplikasi Shiny {#sec-server}\n\n@sec-antarmuka telah menunjukkan adanya input dan luaran dalam aplikasi Shiny kita. Dari input menjadi luaran, terdapat proses komputasi yang dilakukan di dapur Shiny. Proses ini kita tentukan di dalam fungsi `server`.\n\nDi dalam fungsi `server`, kita memberikan resep kepada Shiny untuk melakukan komputasi. Ruas kiri dari operator `<-`, yaitu `output$diagram_pencar`, mengindikasikan bahwa kita memberikan resep untuk luaran dengan identitas `diagram_pencar`.\n\nRuas kanan operator `<-` merupakan fungsi render. Fungsi render ini bermacam-macam jenisnya, tergantung dari luarannya. Karena di antarmuka kita akan membuat plot dengan `plotOutput`, kita perlu menggunakan fungsi `renderPlot()` di sini.\n\nLogika di dalam fungsi `renderPlot()` sama dengan logika yang kita gunakan pada @sec-mengapa-shiny, tetapi dengan sedikit penambahan. Penambahannya adalah pada `tahun_int <- input$tahun`. Kode ini berfungsi untuk memberikan nilai sebesar `input$tahun` kepada variabel `tahun_int`. Nilai `input$tahun` tersebut tergantung dari nilai yang diberikan oleh pengguna terhadap slider dengan identitas `tahun` pada antarmuka.\n\nAlur kerja aplikasi Shiny kita ringkasnya seperti ini. Pertama, pengguna melihat antarmuka aplikasi kita. Di situ dia dapat menggeser slider dengan identitas `tahun` untuk mengganti-ganti nilanya. Nilai ini kemudian dikirim ke dapur Shiny dalam rupa `input$tahun` untuk diolah di dalam fungsi render, yaitu `renderPlot()`. Olahan tersebut menghasilkan luaran yang disebut dengan `output$diagram_pencar`. Luaran ini kemudian dikirimkan lagi ke antarmuka agar dapat dilihat oleh pengguna. Di mana posisinya? Posisinya terletak di mana `plotOutput(\"diagram_pencar\")` berada.\n\n## Sentuhan Akhir {#sec-sentuhan-akhir}\n\nAplikasi Shiny kita masih sederhana dan seperlunya. Kita dapat memperindah aplikasi tersebut. Beberapa hal yang dapat kita lakukan antara lain\n\n-   menambahkan judul ke dalam antarmukanya,\n\n-   mengatur slidernya agar menampilkan bilangan yang tidak memuat pemisah ribuan, dan\n\n-   memperbaiki diagram pencar yang disajikan agar tampilannya sama dengan diagram pencar pada [pos sebelumnya](/pos/2024-08-animasi-diagram-statistik/index.qmd \"Membuat Diagram Lebih Hidup dengan Animasi\"), serta mengatur agar batasan jendelanya konsisten dari tahun ke tahun.\n\nKetiga hal tersebut dapat kita penuhi dengan baris kode seperti pada @lst-app-shiny-baru berikut.\n\n``` {#lst-app-shiny-baru .r filename=\"app.R\" lst-cap=\"Baris kode di dalam app.R\"}\nlibrary(shiny)\nlibrary(tidyverse)\nload(url(\"https://github.com/jennybc/gapminder/raw/main/data/gapminder.rdata\"))\n\nui <- fluidPage(\n  titlePanel(\"PDB per Kapita vs. Angka Harapan Hidup\"),\n  sliderInput(\n    inputId = \"tahun\",\n    label = \"Tahun\",\n    min = 1952,\n    max = 2007,\n    value = 2007,\n    step = 5,\n    sep = \"\"\n  ),\n  plotOutput(\"diagram_pencar\")\n)\n\nserver <- function(input, output, session) {\n  output$diagram_pencar <- renderPlot({\n    tahun_int <- input$tahun\n    \n    gapminder |> \n      filter(year == tahun_int) |> \n      ggplot(\n        aes(x = gdpPercap, y = lifeExp)\n      ) + \n      geom_point(\n        aes(color = continent, size = pop),\n        alpha = .6\n      ) + \n      scale_size(\n        range = c(5, 30),\n        guide = \"none\"\n      ) + \n      scale_color_viridis_d(name = \"Benua\") + \n      theme_minimal(base_size = 18) + \n      theme(\n        legend.position = \"bottom\",\n        plot.title = element_text(face = \"bold\")\n      ) + \n      xlim(c(200, 60000)) + \n      ylim(c(20, 90)) + \n      labs(\n        x = \"PDB per kapita\",\n        y = \"Angka harapan hidup\",\n        caption = \"Data: Jenny Bryan dkk. / Github\"\n      )\n    \n  })\n}\n\nshinyApp(ui = ui, server = server)\n```\n\nBagaimana tampilan aplikasi Shiny kita sekarang? Tampilannya ditunjukkan pada @fig-tampilan-app-baru.\n\n![Tampilan aplikasi Shiny setelah dilakukan sentuhan akhir](aset/tampilan-aplikasi-shiny-baru.gif){#fig-tampilan-app-baru fig-align=\"center\"}\n\n## Catatan Akhir {#sec-catatan-akhir}\n\nKita telah mengenal Shiny. Kita secara bersama-sama juga telah membuat aplikasi Shiny sederhana pada @sec-membuat-app-shiny dan memberikan sentuhan akhir pada @sec-sentuhan-akhir. Aplikasi tersebut dapat menampilkan visualisasi data secara interaktif. Dengan cara demikian, harapannya statistik tidak hanya menjadi konsumsi statistikawan tetapi juga orang awam.\n\nApa selanjutnya? Jika kamu tertarik untuk mengembangkan aplikasi Shiny, kamu dapat belajar dari contoh-contohnya. Contoh tersebut dapat kamu lihat di [laman galeri Shiny untuk R](https://shiny.posit.co/r/gallery/ \"Shiny for R Gallery\"){.external target=\"_blank\"}. Selain itu, kamu juga dapat menjelajah [beberapa aplikasi Shiny yang telah aku kembangkan](https://people.usd.ac.id/~ydkristanto/index.php/media-pengajaran/shiny-stat-dan-id/ \"Aplikasi Shiny untuk Statistika dan Ilmu Data\"){.external target=\"_blank\"}. *Have a shiny day!*\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}